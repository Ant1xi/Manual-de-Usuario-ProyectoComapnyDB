<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Ejercicio 2 - Alta de Nuevo Almac√©n</title>
    <link rel="stylesheet" href="estilo_pagina_principal.css" />
  </head>
  <body>
    <a href="Pagina_principal.html" style="display: block; margin-bottom: 20px"
      >‚¨Ö Volver al √≠ndice</a
    >

    <a href="ejercicio3.html" class="boton-navegacion">
      Ver siguiente ejercicio ‚û°Ô∏è
    </a>
    

    <h1>Ejercicio 2 - Alta de Nuevo Almac√©n</h1>

    <h2>üìå Objetivo</h2>
    <p>
      Permitir al usuario crear un nuevo almac√©n a trav√©s de una interfaz gr√°fica, seleccionando su ubicaci√≥n mediante una cadena de selecci√≥n: Regi√≥n ‚Üí Pa√≠s ‚Üí Ubicaci√≥n.
    </p>

    <img
    src="imagenes/ejercicio2_img1.png"
    alt="Formulario Swing para alta de almac√©n"
    style="max-width: 100%; margin-bottom: 20px"
  />

    <h2>üß† ¬øQu√© hace este ejercicio?</h2>
    <p>
      El usuario selecciona una regi√≥n, luego un pa√≠s dentro de esa regi√≥n, despu√©s una ubicaci√≥n concreta, introduce el nombre del almac√©n y finalmente lo guarda. El programa inserta ese almac√©n en la base de datos, en la tabla <code>WAREHOUSES</code>.
    </p>

    <h2>üß≠ ¬øD√≥nde empieza todo?</h2>
    <h3>1Ô∏è‚É£ En la ventana principal</h3>
    <p>
      Al pulsar el bot√≥n "Alta de Almac√©n", se llama al controlador <code>AlmacenControllerEjercicio2</code> que abre la ventana <code>AltaAlmacenVista</code>.
    </p>

    <img
    src="imagenes/ejercicio2_img2.png"
    alt="Bot√≥n alta de almac√©n"
    style="max-width: 100%; margin-bottom: 20px"
  />

  <img
  src="imagenes/ejercicio2_img3.png"
  alt="M√©todo que carga la vista"
  style="max-width: 100%; margin-bottom: 1px"
/>

    <h2>üñ•Ô∏è ¬øQu√© hace la vista?</h2>
    <p>
      La clase <code>AltaAlmacenVista</code> es una ventana Swing con los siguientes elementos:
    </p>
    <ul>
      <li><strong>Combo 1:</strong> Selecci√≥n de regi√≥n</li>
      <li><strong>Combo 2:</strong> Lista de pa√≠ses seg√∫n regi√≥n</li>
      <li><strong>Combo 3:</strong> Lista de ubicaciones seg√∫n pa√≠s</li>
      <li><strong>Campo de texto:</strong> Nombre del nuevo almac√©n</li>
      <li><strong>Bot√≥n:</strong> Crear nuevo almac√©n</li>
    </ul>

    <p>
      Cada combo se actualiza autom√°ticamente cuando cambia el anterior. Por ejemplo, al cambiar de regi√≥n, se recargan los pa√≠ses disponibles.
    </p>

    <img
      src="imagenes/ejercicio2_img4.png"
      alt="Vista Ejercicio 2"
      style="max-width: 100%; margin-bottom: 20px"
    />

    <img
    src="imagenes/ejercicio2_img5.png"
    alt="Metodos para cargar los JComboBox"
    style="max-width: 100%; margin-bottom: 1px"
  />

    <h2>üß© ¬øQu√© hace el controlador?</h2>
    <p>
      El controlador <code>AlmacenControllerEjercicio2</code> es el intermediario entre la vista y los DAOs. Se encarga de:
    </p>
    <ul>
      <li>Cargar todas las regiones usando <code>RegionDAOImpl</code>.
        <img
        src="imagenes/ejercicio2_img6.png"
        alt="Vista Ejercicio 2"
        style="max-width: 100%; margin-bottom: 10px"
      />
      </li>
      <li>Seg√∫n la regi√≥n, cargar pa√≠ses con <code>CountryDAOImpl</code>.
        <img
        src="imagenes/ejercicio2_img7.png"
        alt="Vista Ejercicio 2"
        style="max-width: 100%; margin-bottom: 10px"
      />
      </li>
      <li>Seg√∫n el pa√≠s, cargar ubicaciones con <code>LocationDAOImpl</code>.
        <img
        src="imagenes/ejercicio2_img8.png"
        alt="Vista Ejercicio 2"
        style="max-width: 100%; margin-bottom: 10px"
      />
      </li>
      <li>Insertar el almac√©n con nombre y <code>location_id</code> usando <code>insertarAlmacen()</code>.
        <img
        src="imagenes/ejercicio2_img9.png"
        alt="Vista Ejercicio 2"
        style="max-width: 100%; margin-bottom: 10px"
      />
      </li>
    </ul>

    <p>
      Para adaptar correctamente los combos, se han utilizado dos DTOs:
      <ul>
        <li><code>OpcionComboDTO</code> para regiones y ubicaciones.</li>
        <li><code>OpcionPaisesComboDTO2</code> para pa√≠ses (ya que el ID del pa√≠s es <code>String</code> y no <code>Integer</code>).</li>
      </ul>
    </p>

    <h2>üóÉÔ∏è Acceso a datos (DAOs)</h2>
    <ul>
      <li><strong>RegionDAOImpl:</strong> devuelve todas las regiones.</li>
      <li><strong>CountryDAOImpl:</strong> devuelve pa√≠ses filtrados por regi√≥n.</li>
      <li><strong>LocationDAOImpl:</strong> devuelve ubicaciones por pa√≠s y ejecuta el <code>INSERT</code> de almacenes.</li>
      <li><strong>WarehouseDAOImpl:</strong> (alternativo) tambi√©n inserta almacenes con nombre y ubicaci√≥n.</li>
    </ul>

    <h2>‚úÖ Validaciones</h2>
    <ul>
      <li>Se comprueba que el nombre del almac√©n no est√© vac√≠o.</li>
      <li>Se verifica que haya una ubicaci√≥n seleccionada.</li>
      <li>Se muestra un <code>JOptionPane</code> si falta alg√∫n dato.</li>
      <li>Al insertar correctamente, se muestra mensaje de √©xito y se cierra la ventana.</li>
    </ul>

    <img
    src="imagenes/ejercicio2_img10.png"
    alt="Vista Ejercicio 2"
    style="max-width: 100%; margin-bottom: 10px"
  />

    <h2>‚ö†Ô∏è Problemas encontrados</h2>
    <ul>
      <li>
        Al principio, tuve problemas para enlazar correctamente los combos dependientes. 
        A veces al seleccionar una regi√≥n, los pa√≠ses no se actualizaban bien por no haber limpiado el combo anterior.
      </li>
      <li>
        Tambi√©n tuve dudas al crear un DTO espec√≠fico para pa√≠ses con <code>String</code> como ID, ya que el DTO que usaba antes solo aceptaba <code>Integer</code>. 
        Esto me oblig√≥ a pensar mejor c√≥mo adaptar los datos a la vista.
      </li>
    </ul>

    <h2>üîö Conclusi√≥n</h2>
    <p>
      Este ejercicio me ha ayudado a entender mejor c√≥mo manejar relaciones entre datos en una interfaz gr√°fica, y c√≥mo construir una experiencia de usuario fluida con combos dependientes.  
      Aunque al principio se me complic√≥ un poco hacer que los combos se actualizaran bien y usar diferentes DTOs seg√∫n el tipo de dato, con la pr√°ctica lo resolv√≠.  
      Tambi√©n he aprendido a validar mejor los datos antes de insertarlos, y a usar excepciones y mensajes para guiar al usuario.  
      En definitiva, este ejercicio me ha servido para reforzar el patr√≥n MVC y mejorar la interacci√≥n con bases de datos desde una interfaz Java.
    </p>
  </body>
</html>
