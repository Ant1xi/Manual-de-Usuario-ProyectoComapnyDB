<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Ejercicio 1 - Alta de Nuevo Empleado</title>
    <link rel="stylesheet" href="estilo_pagina_principal.css" />
  </head>
  <body>
    <a href="Pagina_principal.html" style="display: block; margin-bottom: 20px"
      >‚¨Ö Volver al √≠ndice</a
    >

    <a href="ejercicio2.html" class="boton-navegacion">
      Ver siguiente ejercicio ‚û°Ô∏è
    </a>

    <h1>Ejercicio 1 - Alta de Nuevo Empleado</h1>

    <h2>üìå Objetivo</h2>
    <p>
      Crear una pantalla con interfaz gr√°fica que permita registrar nuevos
      empleados en la base de datos Oracle mediante un formulario de entrada de
      datos.
    </p>

    <img
      src="imagenes/ejercicio1_img3.png"
      alt="Formulario Swing para alta de empleado"
      style="max-width: 100%; margin-bottom: 20px"
    />

    <h2>üß† ¬øQu√© hace este ejercicio?</h2>
    <p>
      El usuario abre la aplicaci√≥n, pulsa un bot√≥n para dar de alta un
      empleado, escribe los datos del nuevo trabajador (nombre, apellido, etc.),
      y pulsa ‚ÄúGuardar‚Äù. Entonces, la app guarda esa informaci√≥n en la base de
      datos Oracle de forma segura.
    </p>

    <h2>üîÑ ¬øD√≥nde empieza todo?</h2>
    <h3>1Ô∏è‚É£ El programa arranca en <code>VentanaPrincipal</code></h3>
    <p>
      Es el punto de entrada del programa. Desde su m√©todo
      <code>main()</code>, se muestra una ventana con botones que activan cada
      funcionalidad. En este caso, el bot√≥n "Alta de Empleado" activa el
      ejercicio 1.
    </p>

    <h2>‚ñ∂Ô∏è ¬øQu√© pasa al pulsar el bot√≥n ‚ÄúAlta de Empleado‚Äù?</h2>
    <ul>
      <li>Se crea un objeto <code>EmployeeControllerEjercicio1</code>.</li>
      <li>Se llama a su m√©todo <code>cargaVistaAltaEmpleado()</code>.</li>
    </ul>

    <img
      src="imagenes/ejercicio1_img2.png"
      alt="Ventana principal con botones de ejercicios"
      style="max-width: 100%; margin-bottom: 20px"
    />

    <h2>üß≠ ¬øQu√© hace el controlador?</h2>
    <h3>2Ô∏è‚É£ M√©todo <code>cargaVistaAltaEmpleado()</code></h3>
    <ul>
      <li>
        Se conecta a la base de datos con
        <code>DataBaseConector.getConnection()</code>.
      </li>
      <li>
        Usa el DAO <code>EmployeeDAOImpl</code> para recuperar todos los
        empleados.
      </li>
      <li>
        Convierte cada empleado en un <code>OpcionComboDTO</code> con ID y
        nombre completo.
      </li>
      <li>
        Llama a <code>AltaEmpleadoVista</code> pas√°ndole esa lista para llenar
        el <code>JComboBox</code> de jefes.
      </li>
    </ul>

    <img
      src="imagenes/ejercicio1_img1.png"
      alt="C√≥digo del controlador de alta de empleado"
      style="max-width: 100%; margin-bottom: 1px"
    />

    <h2>üñ•Ô∏è ¬øQu√© muestra la vista?</h2>
    <p>
      La clase <code>AltaEmpleadoVista</code> crea un formulario en Java Swing
      con los siguientes campos:
    </p>
    <ul>
      <li>Nombre</li>
      <li>Apellido</li>
      <li>Email</li>
      <li>Tel√©fono</li>
      <li>Cargo</li>
      <li>Jefe (seleccionado desde un <code>JComboBox</code>)</li>
    </ul>

    <p>
      Adem√°s, tiene un bot√≥n <strong>Guardar</strong> que ejecuta una validaci√≥n
      y llama al controlador para insertar el nuevo empleado.
    </p>

    <img
      src="imagenes/ejercicio1_img5.png"
      alt="C√≥digo de la vista para guardar empleado"
      style="max-width: 100%; margin-bottom: 1px"
    />

    <h2>‚úÖ ¬øQu√© hace al pulsar ‚ÄúGuardar‚Äù?</h2>
    <ol>
      <li>Comprueba que todos los campos est√©n rellenados.</li>
      <li>
        Si hay errores, muestra un <code>JOptionPane</code> de advertencia.
      </li>
      <li>
        Si todo est√° bien, construye un objeto <code>Employee</code> y lo pasa
        al m√©todo <code>guardarEmpleado()</code> del controlador.
      </li>
      <li>
        Este m√©todo usa el DAO para hacer el <code>INSERT</code> en Oracle.
      </li>
    </ol>

    <h2>üóÉÔ∏è ¬øQu√© hace el DAO?</h2>
    <p>
      La clase <code>EmployeeDAOImpl</code> se conecta a la base de datos y
      ejecuta la siguiente consulta:
    </p>

    <p>
      <code>
        INSERT INTO employees (first_name, last_name, email, phone, hire_date,
        manager_id, job_title) VALUES (?, ?, ?, ?, ?, ?, ?);
      </code>
    </p>

    <img
      src="imagenes/ejercicio1_img7.png"
      alt="C√≥digo del DAO para crear empleado"
      style="max-width: 100%; margin-bottom: 1px"
    />
    <p>
      El m√©todo <code>create()</code> se encarga de convertir los datos de
      <code>Employee</code> a los tipos adecuados para Oracle y ejecutar la
      operaci√≥n.
    </p>

    <h2>üõ°Ô∏è Validaciones y errores</h2>
    <ul>
      <li>
        Se lanza <code>IncorrectDataException</code> si alg√∫n campo obligatorio
        est√° vac√≠o.
      </li>
      <li>
        Se usa <code>JOptionPane</code> para mostrar errores de validaci√≥n o
        √©xito en el guardado.
      </li>
      <li>
        El controlador captura errores de conexi√≥n o de inserci√≥n con mensajes
        claros.
      </li>
    </ul>

    <img
      src="imagenes/ejercicio1_img8.png"
      alt="Tipos de JOptionPane"
      style="max-width: 100%; margin-bottom: 1px"
    />

    <h2>üß± Arquitectura usada</h2>
    <p>
      Este ejercicio est√° estructurado siguiendo el patr√≥n
      <strong>MVC (Modelo - Vista - Controlador)</strong>, con una separaci√≥n
      clara:
    </p>
    <ul>
      <li><strong>Modelo:</strong> clase <code>Employee</code></li>
      <li>
        <strong>Vista:</strong> clase <code>AltaEmpleadoVista</code> (Swing)
      </li>
      <li>
        <strong>Controlador:</strong> <code>EmployeeControllerEjercicio1</code>
      </li>
      <li><strong>DAO:</strong> <code>EmployeeDAOImpl</code></li>
      <li>
        <strong>DTO:</strong> <code>OpcionComboDTO</code> para llenar combos
      </li>
    </ul>

    <h2>üîö Conclusi√≥n</h2>
    <p>
      En este ejercicio he creado todo el proceso para poder dar de alta un
      nuevo empleado en la base de datos usando una interfaz gr√°fica hecha con
      Java Swing.
    </p>
    <p>
      He seguido el patr√≥n Modelo-Vista-Controlador para tener el c√≥digo bien
      organizado y separar la l√≥gica, la vista y los datos. Para rellenar el
      combo con los jefes disponibles, utilic√© un DTO que me permite pasar solo
      lo necesario a la vista sin acoplarla a la base de datos.
    </p>
    <p>
      Al principio, sinceramente, no entend√≠a del todo c√≥mo funcionaba el patr√≥n
      MVC. Me saltaba capas sin darme cuenta, y mezclaba un poco todo porque no
      lo ten√≠a claro. Fue gracias a la ayuda de Quique, que me lo explic√≥ muy
      bien y de forma sencilla, cuando por fin entend√≠ c√≥mo deb√≠a estructurar el
      proyecto. Desde ese momento he intentado que todo lo que hago siga esa
      idea de separaci√≥n en capas lo mejor posible.
    </p>
    <p>
      Tambi√©n tuve algunos problemas t√©cnicos, como el manejo de fechas. Me
      cost√≥ un poco entender que ten√≠a que convertir el <code>Date</code> de
      Java a <code>java.sql.Date</code> para poder guardarlo correctamente en
      Oracle. Adem√°s, tuve que tener cuidado con los campos que pueden ser
      nulos, como el ID del manager, y us√© <code>setObject</code> con
      <code>Types.INTEGER</code> para eso.
    </p>
    <p>
      A√±ad√≠ validaciones para asegurarme de que no se pudiera guardar un
      empleado si faltaban datos importantes, y us√©
      <code>JOptionPane</code> para mostrar mensajes al usuario seg√∫n fuera
      necesario.
    </p>
    <p>
      En general, este ejercicio me ha ayudado mucho a entender c√≥mo se
      estructura una aplicaci√≥n real, a aplicar el patr√≥n MVC de forma m√°s
      consciente, y a trabajar con base de datos desde Java de manera m√°s
      profesional.
    </p>
  </body>
</html>
